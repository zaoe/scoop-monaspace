{
  "version": "latest",
  "description": "Monaspace variable fonts (VF). No Nerd glyphs. Installs into current user's font directory.",
  "homepage": "https://github.com/githubnext/monaspace",
  "license": "OFL-1.1",
  "architecture": {
    "64bit": { "url": "https://raw.githubusercontent.com/zaoe/scoop-monaspace/main/.scoop-stub", "hash": "sha256:19491d9f7405001624323bdb41b36cd4eae041da53dd44796e902bf161a75518" },
    "arm64": { "url": "https://raw.githubusercontent.com/zaoe/scoop-monaspace/main/.scoop-stub", "hash": "sha256:19491d9f7405001624323bdb41b36cd4eae041da53dd44796e902bf161a75518" },
    "32bit": { "url": "https://raw.githubusercontent.com/zaoe/scoop-monaspace/main/.scoop-stub", "hash": "sha256:19491d9f7405001624323bdb41b36cd4eae041da53dd44796e902bf161a75518" }
  },
  "installer": {
    "script": [
      "$ErrorActionPreference='Stop'",
      "$api='https://api.github.com/repos/githubnext/monaspace/releases/latest'",
      "$rel=Invoke-RestMethod $api",
      "$asset=$rel.assets | Where-Object { $_.name -match 'variable' -and $_.name -match '\\.zip$' } | Select-Object -First 1",
      "if(-not $asset){ throw 'No variable asset found in latest release.' }",
      "$zip=Join-Path $dir $asset.name",
      "Invoke-WebRequest $asset.browser_download_url -OutFile $zip",
      "Expand-Archive $zip -DestinationPath $dir -Force",
      "$dst = Join-Path $env:LOCALAPPDATA 'Microsoft\\Windows\\Fonts'",
      "New-Item -ItemType Directory -Force -Path $dst | Out-Null",
      "$fonts = Get-ChildItem $dir -Recurse -Include *.ttf,*.otf -ErrorAction SilentlyContinue",
      "if(-not $fonts){ throw 'No variable fonts found in package.' }",
      "$list = Join-Path $persist_dir 'installed.txt'",
      "$fonts | % FullName | Set-Content -Path $list -Encoding UTF8",
      "foreach($f in $fonts){ Copy-Item $f.FullName $dst -Force }"
    ]
  },
  "uninstaller": {
    "script": [
      "$dst = Join-Path $env:LOCALAPPDATA 'Microsoft\\Windows\\Fonts'",
      "$list = Join-Path $persist_dir 'installed.txt'",
      "if(Test-Path $list){ Get-Content $list | % { Join-Path $dst (Split-Path $_ -Leaf) } | % { if(Test-Path $_){ Remove-Item $_ -Force -ErrorAction SilentlyContinue } } }"
    ]
  },
  "persist": ["installed.txt"]
}
